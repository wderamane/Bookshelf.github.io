<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bookshelf ‚Äì Accueil</title>

  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: radial-gradient(circle at top, #0f172a, #020617);
      color: #fff;
      min-height: 100vh;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.2rem 2rem;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .btn {
      background: #f97316;
      color: white;
      padding: 0.55rem 1rem;
      border: none;
      border-radius: 999px;
      cursor: pointer;
    }

    .btn-outline {
      background: transparent;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 999px;
      padding: 0.5rem 1rem;
      color: white;
      cursor: pointer;
    }

    .hero {
      padding: 5rem 3rem;
      max-width: 830px;
    }

    h1 { font-size: 2.8rem; margin-bottom: 0.5rem; }
  </style>

  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.5/auth0-spa-js.production.js"></script>
</head>
<body>

<header>
  <div style="font-size:1.4rem;">üìö Ma biblioth√®que num√©rique</div>

  <div>
    <span id="userLabel">Invit√©</span>
    <button id="loginBtn" class="btn-outline">Se connecter</button>
    <button id="logoutBtn" class="btn" style="display:none;">Se d√©connecter</button>
    <a href="bibliotheque.html" class="btn">Ouvrir la biblioth√®que ‚Üí</a>
  </div>
</header>

<section class="hero">
  <h1>Retrouve tous tes livres PDF au m√™me endroit</h1>
  <p>Void Project, romans, documents, tout est rang√© et accessible de mani√®re s√©curis√©e.</p>

  <button class="btn" onclick="window.location='bibliotheque.html'">
    Acc√©der √† la biblioth√®que
  </button>
</section>

<script>
const auth0Client = await auth0.createAuth0Client({
  domain: "dev-cs1dp4naybhpswqf.us.auth0.com",
  clientId: "c0gjwDJ78cwVGoEndWm1fgj7S9Mj6vp2",
  authorizationParams: {
    redirect_uri: "https://wderamane.github.io/bookshelf"
  }
});

const loginBtn = document.getElementById("loginBtn");
const logoutBtn = document.getElementById("logoutBtn");
const userLabel = document.getElementById("userLabel");

async function refreshUI() {
  const isAuth = await auth0Client.isAuthenticated();

  if (isAuth) {
    loginBtn.style.display = "none";
    logoutBtn.style.display = "inline-block";
    const user = await auth0Client.getUser();
    userLabel.textContent = user.name || "Utilisateur";
  } else {
    loginBtn.style.display = "inline-block";
    logoutBtn.style.display = "none";
    userLabel.textContent = "Invit√©";
  }
}

loginBtn.onclick = () => auth0Client.loginWithRedirect();
logoutBtn.onclick = () => auth0Client.logout({ logoutParams: { returnTo: "https://wderamane.github.io/bookshelf" } });

if (window.location.search.includes("code=")) {
  await auth0Client.handleRedirectCallback();
  window.history.replaceState({}, document.title, "/bookshelf");
}

refreshUI();
</script>

</body>
</html>
